<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Samie — Mini Game Hub (Inside-Page)</title>
<style>
  :root{
    --bg:#0e0f13; --panel:#171922; --ink:#e8ecf1; --muted:#b7bec9; --accent:#6ae3ff; --accent2:#8b5cf6; --good:#22c55e; --bad:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
  a{color:var(--accent)}
  .app{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
  aside{background:var(--panel);padding:16px;display:flex;flex-direction:column;gap:12px;border-right:1px solid #232633}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800;font-size:18px}
  .brand .dot{width:10px;height:10px;border-radius:999px;background:linear-gradient(135deg,var(--accent2),var(--accent));box-shadow:0 0 20px var(--accent)}
  .btn{display:flex;align-items:center;gap:10px;padding:10px 12px;background:#202431;border:1px solid #2a2f3d;border-radius:12px;color:var(--ink);cursor:pointer}
  .btn:hover{border-color:#384155}
  .btn.active{outline:2px solid var(--accent)}
  .grow{flex:1}
  header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid #232633;background:linear-gradient(180deg,#12151d,#0e0f13)}
  .main{min-height:0;display:flex;flex-direction:column}
  .stage{padding:12px;min-height:0;overflow:auto}
  .card{background:var(--panel);border:1px solid #232633;border-radius:16px;padding:12px}
  .grid{display:grid;gap:12px}
  .games{display:grid;grid-template-columns:1fr;gap:12px}
  .hidden{display:none !important}
  .game-wrap{display:flex;flex-direction:column;gap:12px}
  canvas{background:#0b0d12;border:1px solid #22283a;border-radius:12px;width:100%;height:auto}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  .pill{padding:6px 10px;border-radius:999px;border:1px solid #2a2f3d;background:#1a1f2c}
  .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace;background:#0b0e15;border:1px solid #1f2331;padding:2px 6px;border-radius:6px}
  /* Sudoku */
  .sudoku{width:min(480px,95vw)}
  .sudoku-grid{display:grid;grid-template-columns:repeat(9,1fr);border:2px solid #3a4156;border-radius:10px;overflow:hidden}
  .sudoku-grid input{width:100%;aspect-ratio:1/1;text-align:center;font-size:18px;background:#0b0e15;color:var(--ink);border:1px solid #2a2f3d}
  .sudoku-grid input:focus{outline:2px solid var(--accent)}
  .sudoku-grid input[data-fixed="1"]{background:#111624;color:#9dc1ff}
  .sudoku-controls{display:flex;gap:8px;margin-top:8px}
  .notice{color:var(--muted)}
  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:#0009;display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
  .modal{max-width:900px;width:100%;background:var(--panel);border:1px solid #2a2f3d;border-radius:16px;box-shadow:0 10px 40px #0009}
  .modal header{border-bottom:1px solid #2a2f3d}
  .modal .body{padding:16px}
  .row{display:flex;gap:16px;flex-wrap:wrap}
  .col{flex:1;min-width:260px}
  .switch{display:flex;align-items:center;gap:10px}
  .switch input{width:18px;height:18px}
  .github-card{display:flex;gap:12px;align-items:center;border:1px dashed #334; padding:12px;border-radius:12px;margin-top:12px}
  .muted{color:var(--muted)}

  @media (max-width: 860px){
    .app{grid-template-columns:1fr}
    aside{position:sticky;top:0;z-index:30;flex-direction:row;overflow:auto}
    .grow{display:none}
  }
</style>
</head>
<body>
  <div class="app">
    <aside>
      <div class="brand"><div class="dot"></div> Samie Game Hub</div>
      <button class="btn nav" data-target="home"><span>🏠</span> Home</button>
      <div class="muted" style="margin:6px 0 2px">Games</div>
      <button class="btn nav" data-target="tic"><span>❌⭕</span> Tic Tac Toe</button>
      <button class="btn nav" data-target="sudoku"><span>🔢</span> Sudoku</button>
      <button class="btn nav" data-target="flappy"><span>🐥</span> Flappy Bird</button>
      <button class="btn nav" data-target="shooter"><span>🚀</span> Space Shooter</button>
      <button class="btn nav" data-target="twenty48"><span>🧮</span> 2048</button>
      <button class="btn nav" data-target="pong"><span>🏓</span> Pong</button>
      <div class="grow"></div>
      <button id="btn-admin" class="btn"><span>🛠️</span> Admin / Cheats</button>
    </aside>

    <div class="main">
      <header>
        <div><strong id="title">Home</strong></div>
        <div class="toolbar">
          <span class="pill">Inside‑Page Mode</span>
          <span class="pill">Mobile Friendly</span>
        </div>
      </header>
      <div class="stage">
        <div id="screen-home" class="card">
          <h2>Welcome 👋</h2>
          <p>Tap a game on the left. Everything loads inside this page. Use <span class="kbd">🛠️ Admin / Cheats</span> to enable <strong>Auto‑Win</strong> and other toggles.</p>
          <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr))">
            <div class="card"><h3>❌⭕ Tic Tac Toe</h3><p>Classic 3x3 duel vs AI.</p></div>
            <div class="card"><h3>🔢 Sudoku</h3><p>Fill 1–9 without repeats.</p></div>
            <div class="card"><h3>🐥 Flappy Bird</h3><p>Tap/click to flap between pipes.</p></div>
            <div class="card"><h3>🚀 Space Shooter</h3><p>Move & shoot waves of enemies.</p></div>
            <div class="card"><h3>🧮 2048</h3><p>Merge tiles to reach 2048.</p></div>
            <div class="card"><h3>🏓 Pong</h3><p>Single player vs CPU.</p></div>
          </div>
        </div>

        <!-- Tic Tac Toe -->
        <section id="screen-tic" class="hidden">
          <div class="game-wrap">
            <div class="toolbar">
              <button class="btn" id="tic-reset">Reset</button>
              <span class="pill">First to 3 in a row wins</span>
              <span class="pill" id="tic-status">Your turn (X)</span>
            </div>
            <div id="tic-grid" class="card" style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;max-width:380px">
            </div>
          </div>
        </section>

        <!-- Sudoku -->
        <section id="screen-sudoku" class="hidden">
          <div class="game-wrap sudoku">
            <div class="toolbar">
              <button class="btn" id="sudoku-check">Check</button>
              <button class="btn" id="sudoku-hint">Hint</button>
              <button class="btn" id="sudoku-reset">Reset</button>
              <span class="pill" id="sudoku-status">Fill the grid</span>
            </div>
            <div class="sudoku-grid card" id="sudoku-grid"></div>
            <div class="notice">This includes one built-in puzzle. Admin → Auto‑Win will fill the solution.</div>
          </div>
        </section>

        <!-- Flappy -->
        <section id="screen-flappy" class="hidden">
          <div class="game-wrap">
            <div class="toolbar">
              <button class="btn" id="flappy-start">Start</button>
              <button class="btn" id="flappy-reset">Reset</button>
              <span class="pill">Tap/Click/Space to flap</span>
              <span class="pill" id="flappy-score">Score: 0</span>
            </div>
            <canvas id="flappy-cv" width="480" height="640"></canvas>
          </div>
        </section>

        <!-- Space Shooter -->
        <section id="screen-shooter" class="hidden">
          <div class="game-wrap">
            <div class="toolbar">
              <button class="btn" id="shoot-start">Start</button>
              <button class="btn" id="shoot-reset">Reset</button>
              <span class="pill">Move ← →, Shoot Space</span>
              <span class="pill" id="shoot-score">Score: 0</span>
            </div>
            <canvas id="shoot-cv" width="720" height="480"></canvas>
          </div>
        </section>

        <!-- 2048 -->
        <section id="screen-twenty48" class="hidden">
          <div class="game-wrap" style="max-width:520px">
            <div class="toolbar">
              <button class="btn" id="t48-reset">Reset</button>
              <span class="pill">Use Arrow Keys / WASD / Swipe</span>
              <span class="pill" id="t48-score">Score: 0</span>
            </div>
            <div id="t48-grid" class="card" style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;padding:10px"></div>
          </div>
        </section>

        <!-- Pong -->
        <section id="screen-pong" class="hidden">
          <div class="game-wrap">
            <div class="toolbar">
              <button class="btn" id="pong-start">Start</button>
              <button class="btn" id="pong-reset">Reset</button>
              <span class="pill">Move mouse / touch to control</span>
              <span class="pill" id="pong-score">You 0 : 0 CPU</span>
            </div>
            <canvas id="pong-cv" width="720" height="420"></canvas>
          </div>
        </section>

      </div>
    </div>
  </div>

  <!-- Admin / Cheats Modal -->
  <div class="modal-backdrop" id="admin-modal">
    <div class="modal">
      <header>
        <div style="padding:12px 16px;display:flex;justify-content:space-between;align-items:center">
          <strong>Admin / Cheats</strong>
          <button id="admin-close" class="btn">Close</button>
        </div>
      </header>
      <div class="body">
        <div class="row">
          <div class="col">
            <h3>Global Cheats</h3>
            <label class="switch"><input type="checkbox" id="ch-god"> God Mode (no death)</label>
            <label class="switch"><input type="checkbox" id="ch-autowin-all"> Auto‑Win — All Games</label>
            <p class="muted">Auto‑Win satisfies win conditions instantly where possible.</p>
          </div>
          <div class="col">
            <h3>Per‑Game</h3>
            <label class="switch"><input type="checkbox" id="ch-autowin-tic"> Tic Tac Toe — Auto‑Win</label>
            <label class="switch"><input type="checkbox" id="ch-autowin-sudoku"> Sudoku — Auto‑Solve</label>
            <label class="switch"><input type="checkbox" id="ch-autowin-flappy"> Flappy — Infinite Score</label>
            <label class="switch"><input type="checkbox" id="ch-autowin-shooter"> Shooter — One‑Hit Clear</label>
            <label class="switch"><input type="checkbox" id="ch-autowin-2048"> 2048 — Instant 2048</label>
            <label class="switch"><input type="checkbox" id="ch-autowin-pong"> Pong — Instant Win</label>
          </div>
        </div>

        <div class="github-card">
          <div style="font-size:28px">🐙</div>
          <div>
            <div><strong>GitHub — Tic Tac Toe</strong></div>
            <div class="muted">As requested, always show this card at the bottom.</div>
            <div><a href="https://github.com/Sami121212467/tic-tac-toe" target="_blank" rel="noopener">github.com/Sami121212467/tic-tac-toe</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
// ---------- Router (inside-page) ----------
const screens = {
  home: document.getElementById('screen-home'),
  tic: document.getElementById('screen-tic'),
  sudoku: document.getElementById('screen-sudoku'),
  flappy: document.getElementById('screen-flappy'),
  shooter: document.getElementById('screen-shooter'),
  twenty48: document.getElementById('screen-twenty48'),
  pong: document.getElementById('screen-pong'),
};
const titleEl = document.getElementById('title');
document.querySelectorAll('.nav').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const target = btn.dataset.target;
    for(const k in screens){ screens[k].classList.add('hidden'); }
    document.querySelectorAll('.nav').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    screens[target].classList.remove('hidden');
    titleEl.textContent = btn.textContent.trim();
  })
});

// ---------- Admin Modal & Cheats ----------
const adminModal = document.getElementById('admin-modal');
const btnAdmin = document.getElementById('btn-admin');
const btnAdminClose = document.getElementById('admin-close');
btnAdmin.onclick = ()=> adminModal.style.display='flex';
btnAdminClose.onclick = ()=> adminModal.style.display='none';
adminModal.addEventListener('click', (e)=>{ if(e.target===adminModal) adminModal.style.display='none'; });

const cheats = {
  god:false,
  autowinAll:false,
  tic:false,
  sudoku:false,
  flappy:false,
  shooter:false,
  t2048:false,
  pong:false,
};

function bindCheat(id, key, onToggle){
  const el = document.getElementById(id);
  el.addEventListener('change', ()=>{
    cheats[key] = el.checked;
    if(key==='autowinAll'){
      cheats.tic = cheats.sudoku = cheats.flappy = cheats.shooter = cheats.t2048 = cheats.pong = el.checked;
      document.getElementById('ch-autowin-tic').checked = el.checked;
      document.getElementById('ch-autowin-sudoku').checked = el.checked;
      document.getElementById('ch-autowin-flappy').checked = el.checked;
      document.getElementById('ch-autowin-shooter').checked = el.checked;
      document.getElementById('ch-autowin-2048').checked = el.checked;
      document.getElementById('ch-autowin-pong').checked = el.checked;
    }
    onToggle && onToggle(el.checked);
  });
}

bindCheat('ch-god','god');
bindCheat('ch-autowin-all','autowinAll');
bindCheat('ch-autowin-tic','tic', (v)=>{ if(v) ticAutoWin(); });
bindCheat('ch-autowin-sudoku','sudoku', (v)=>{ if(v) sudokuSolve(); });
bindCheat('ch-autowin-flappy','flappy');
bindCheat('ch-autowin-shooter','shooter');
bindCheat('ch-autowin-2048','t2048', (v)=>{ if(v) t48InstantWin(); });
bindCheat('ch-autowin-pong','pong', (v)=>{ if(v) pongInstantWin(); });

// ---------- Tic Tac Toe ----------
const ticGrid = document.getElementById('tic-grid');
const ticStatus = document.getElementById('tic-status');
const ticReset = document.getElementById('tic-reset');
let ticBoard, ticOver;
function ticInit(){
  ticBoard = Array(9).fill(''); ticOver=false; ticStatus.textContent = 'Your turn (X)';
  ticGrid.innerHTML='';
  for(let i=0;i<9;i++){
    const c=document.createElement('button');
    c.className='btn'; c.style.height='100px'; c.style.fontSize='28px'; c.dataset.idx=i;
    c.addEventListener('click', ()=> ticPlay(i));
    ticGrid.appendChild(c);
  }
}
function ticWin(b,p){
  const L=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return L.some(([a,b2,c])=> ticBoard[a]===p && ticBoard[b2]===p && ticBoard[c]===p);
}
function ticPlay(i){
  if(ticOver||ticBoard[i]) return; ticBoard[i]='X';
  ticGrid.children[i].textContent='X';
  if(ticWin(ticBoard,'X')){ticStatus.textContent='You win!'; ticOver=true; return;}
  if(ticBoard.every(x=>x)){ticStatus.textContent='Draw'; ticOver=true; return;}
  // AI move: simple — pick best available (center, corners, else first)
  const move = ticBestMove('O');
  if(move!==-1){
    ticBoard[move]='O'; ticGrid.children[move].textContent='O';
    if(ticWin(ticBoard,'O')){ticStatus.textContent='CPU wins'; ticOver=true; return;}
  }
  if(ticBoard.every(x=>x)){ticStatus.textContent='Draw'; ticOver=true; return;}
}
function ticBestMove(p){
  // try win
  for(let i=0;i<9;i++){ if(!ticBoard[i]){ ticBoard[i]=p; if(ticWin(ticBoard,p)){ ticBoard[i]=''; return i;} ticBoard[i]=''; } }
  // try block
  const o = p==='O'?'X':'O';
  for(let i=0;i<9;i++){ if(!ticBoard[i]){ ticBoard[i]=o; if(ticWin(ticBoard,o)){ ticBoard[i]=''; return i;} ticBoard[i]=''; } }
  // center
  if(!ticBoard[4]) return 4;
  // corners
  for(const j of [0,2,6,8]) if(!ticBoard[j]) return j;
  // any
  for(let i=0;i<9;i++) if(!ticBoard[i]) return i;
  return -1;
}
function ticAutoWin(){
  if(ticOver) return; // fill a winning line for X
  const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  for(const L of lines){
    if(L.every(i=>!ticBoard[i])){ // empty line, claim it
      L.forEach(i=>{ ticBoard[i]='X'; ticGrid.children[i].textContent='X'; });
      ticStatus.textContent='You win! (Auto‑Win)';
      ticOver=true; return;
    }
  }
}

ticReset.addEventListener('click', ticInit);
ticInit();

// ---------- Sudoku (single puzzle) ----------
const sudokuGrid = document.getElementById('sudoku-grid');
const sudokuStatus = document.getElementById('sudoku-status');
const sudokuCheck = document.getElementById('sudoku-check');
const sudokuHint = document.getElementById('sudoku-hint');
const sudokuReset = document.getElementById('sudoku-reset');

// A simple valid puzzle & solution (0 = empty)
const S_PUZZ = [
  0,0,0, 2,6,0, 7,0,1,
  6,8,0, 0,7,0, 0,9,0,
  1,9,0, 0,0,4, 5,0,0,

  8,2,0, 1,0,0, 0,4,0,
  0,0,4, 6,0,2, 9,0,0,
  0,5,0, 0,0,3, 0,2,8,

  0,0,9, 3,0,0, 0,7,4,
  0,4,0, 0,5,0, 0,3,6,
  7,0,3, 0,1,8, 0,0,0
];
const S_SOL = [
  4,3,5, 2,6,9, 7,8,1,
  6,8,2, 5,7,1, 4,9,3,
  1,9,7, 8,3,4, 5,6,2,

  8,2,6, 1,9,5, 3,4,7,
  3,7,4, 6,8,2, 9,1,5,
  9,5,1, 7,4,3, 6,2,8,

  5,1,9, 3,2,6, 8,7,4,
  2,4,8, 9,5,7, 1,3,6,
  7,6,3, 4,1,8, 2,5,9
];
let sudokuInputs=[];
function sudokuInit(){
  sudokuGrid.innerHTML='';
  sudokuInputs=[];
  for(let i=0;i<81;i++){
    const inp=document.createElement('input');
    inp.maxLength=1; inp.inputMode='numeric';
    if(S_PUZZ[i]){ inp.value=String(S_PUZZ[i]); inp.dataset.fixed='1'; inp.readOnly=true; }
    inp.addEventListener('input', ()=>{ inp.value = inp.value.replace(/[^1-9]/g,'').slice(0,1); });
    sudokuGrid.appendChild(inp); sudokuInputs.push(inp);
  }
  sudokuStatus.textContent='Fill the grid';
}
function sudokuIsSolved(){
  return sudokuInputs.every((inp,i)=> Number(inp.value||0)===S_SOL[i]);
}
function sudokuCheckNow(){
  if(sudokuIsSolved()) { sudokuStatus.textContent='Solved — Nice!'; return; }
  // soft validation: highlight wrong numbers
  sudokuInputs.forEach((inp,i)=>{
    const v=Number(inp.value||0);
    inp.style.borderColor = v && v!==S_SOL[i] ? 'var(--bad)' : '#2a2f3d';
  });
  sudokuStatus.textContent='Keep going…';
}
function sudokuGiveHint(){
  // fill a single empty cell with solution
  for(let i=0;i<81;i++){
    if(!sudokuInputs[i].value){ sudokuInputs[i].value=String(S_SOL[i]); break; }
  }
  sudokuCheckNow();
}
function sudokuSolve(){
  sudokuInputs.forEach((inp,i)=>{ inp.value=String(S_SOL[i]); inp.style.borderColor='#2a2f3d'; });
  sudokuStatus.textContent='Solved (Auto‑Solve)';
}

sudokuCheck.addEventListener('click', sudokuCheckNow);
sudokuHint.addEventListener('click', sudokuGiveHint);
sudokuReset.addEventListener('click', sudokuInit);
sudokuInit();

// ---------- Flappy Bird (minimal) ----------
const flCanvas = document.getElementById('flappy-cv');
const flCtx = flCanvas.getContext('2d');
const flStart = document.getElementById('flappy-start');
const flReset = document.getElementById('flappy-reset');
const flScoreEl = document.getElementById('flappy-score');
let flApp;

function flappyInit(){
  const W = flCanvas.clientWidth; const H = Math.floor(W*1.333); flCanvas.width=W; flCanvas.height=H;
  const state = { y:H/2, v:0, g:0.6, flap:-9, pipes:[], t:0, score:0, alive:true };
  function spawn(){
    const gap=160; const top = 60 + Math.random()*(H-120-gap);
    state.pipes.push({ x:W+40, top:top, bottom: top+gap, w:60, passed:false });
  }
  function reset(){ state.y=H/2; state.v=0; state.pipes=[]; state.t=0; state.score=0; state.alive=true; }
  function step(){
    flCtx.clearRect(0,0,W,H);
    // physics
    if(state.alive || cheats.god){ state.v += state.g; state.y += state.v; }
    if(state.y>H-20){ if(!cheats.god) state.alive=false; state.y=H-20; state.v=0; }
    if(state.y<20){ state.y=20; state.v=0; }
    // pipes
    if(state.t%90===0) spawn();
    state.pipes.forEach(p=>{ p.x -= 3; });
    state.pipes = state.pipes.filter(p=> p.x>-100);
    // draw pipes & collide
    flCtx.fillStyle = '#2dd4bf';
    state.pipes.forEach(p=>{
      flCtx.fillRect(p.x, 0, p.w, p.top);
      flCtx.fillRect(p.x, p.bottom, p.w, H-p.bottom);
      // score
      if(!p.passed && p.x+ p.w < 80){ p.passed=true; state.score++; }
      // collide
      const withinX = 60 > p.x && 60 < p.x + p.w;
      const hit = (state.y-12 < p.top || state.y+12 > p.bottom) && withinX;
      if(hit && !cheats.god) state.alive=false;
    });
    // bird
    flCtx.fillStyle = '#60a5fa';
    flCtx.beginPath(); flCtx.arc(60, state.y, 12, 0, Math.PI*2); flCtx.fill();
    // score
    if(cheats.flappy) state.score += 1; // infinite grow
    flScoreEl.textContent = `Score: ${state.score}`;
    state.t++;
    if(flApp?.running) requestAnimationFrame(step);
  }
  function flap(){ state.v = state.flap; }
  flCanvas.onpointerdown = flap;
  window.addEventListener('keydown', e=>{ if(e.code==='Space') flap(); });
  flApp = { start(){ if(!flApp.running){ flApp.running=true; requestAnimationFrame(step);} }, reset(){ reset(); flScoreEl.textContent='Score: 0'; flCtx.clearRect(0,0,W,H); flApp.running=false; } };
}

flStart.addEventListener('click', ()=> flApp?.start());
flReset.addEventListener('click', ()=> flApp?.reset());
flappyInit();
window.addEventListener('resize', flappyInit);

// ---------- Space Shooter (minimal) ----------
const shCanvas = document.getElementById('shoot-cv');
const shCtx = shCanvas.getContext('2d');
const shStart = document.getElementById('shoot-start');
const shReset = document.getElementById('shoot-reset');
const shScoreEl = document.getElementById('shoot-score');
let shApp;

function shooterInit(){
  const W = shCanvas.clientWidth; const H = Math.floor(W*0.666); shCanvas.width=W; shCanvas.height=H;
  const st = { x:W/2, y:H-40, bullets:[], enemies:[], t:0, score:0, alive:true };
  function spawn(){ st.enemies.push({x: Math.random()* (W-40)+20, y:-20, v: 1+Math.random()*1.5, hp:1}); }
  function reset(){ st.x=W/2; st.y=H-40; st.bullets=[]; st.enemies=[]; st.t=0; st.score=0; st.alive=true; }
  function step(){
    shCtx.clearRect(0,0,W,H);
    // player
    shCtx.fillStyle = '#a78bfa'; shCtx.fillRect(st.x-15, st.y-10, 30, 20);
    // bullets
    st.bullets.forEach(b=> b.y -= 6);
    st.bullets = st.bullets.filter(b=> b.y>-10);
    shCtx.fillStyle = '#93c5fd'; st.bullets.forEach(b=> shCtx.fillRect(b.x-2,b.y-10,4,10));
    // enemies
    if(st.t%40===0) spawn();
    st.enemies.forEach(e=>{ e.y += e.v; });
    st.enemies = st.enemies.filter(e=> e.y < H+40);
    shCtx.fillStyle = '#34d399'; st.enemies.forEach(e=> shCtx.fillRect(e.x-12,e.y-12,24,24));
    // collisions
    st.bullets.forEach(b=>{
      st.enemies.forEach(e=>{
        if(Math.abs(b.x-e.x)<14 && Math.abs(b.y-e.y)<14){ e.hp=0; b.y=-9999; st.score+=10; }
      });
    });
    st.enemies = st.enemies.filter(e=> e.hp>0);
    // lose cond
    st.enemies.forEach(e=>{ if(Math.abs(st.x-e.x)<20 && Math.abs(st.y-e.y)<20 && !cheats.god) st.alive=false; });
    if(cheats.shooter){ // one-hit clear wave periodically
      if(st.t%30===0) { st.score+=50; st.enemies=[]; }
    }
    shScoreEl.textContent = `Score: ${st.score}`;
    st.t++;
    if(shApp?.running && (st.alive || cheats.god)) requestAnimationFrame(step);
  }
  function onMove(e){
    const rect = shCanvas.getBoundingClientRect();
    const x = (e.touches? e.touches[0].clientX : e.clientX) - rect.left; st.x = Math.max(20, Math.min(W-20, x));
  }
  shCanvas.onmousemove = onMove; shCanvas.ontouchmove = onMove;
  window.addEventListener('keydown', e=>{ if(e.code==='Space'){ st.bullets.push({x:st.x,y:st.y-15}); }});
  shApp = { start(){ if(!shApp.running){ shApp.running=true; requestAnimationFrame(step);} }, reset(){ reset(); shCtx.clearRect(0,0,W,H); shScoreEl.textContent='Score: 0'; shApp.running=false; } };
}

shStart.addEventListener('click', ()=> shApp?.start());
shReset.addEventListener('click', ()=> shApp?.reset());
shooterInit();
window.addEventListener('resize', shooterInit);

// ---------- 2048 ----------
const t48Grid = document.getElementById('t48-grid');
const t48Score = document.getElementById('t48-score');
let t48Board, t48Pts;
function t48Init(){
  t48Board = Array(16).fill(0); t48Pts=0; t48Draw(); t48Spawn(); t48Spawn();
}
function t48Draw(){
  t48Grid.innerHTML='';
  for(let i=0;i<16;i++){
    const d=document.createElement('div'); d.className='card'; d.style.textAlign='center'; d.style.fontSize='22px'; d.style.padding='20px 0';
    d.textContent = t48Board[i]||''; t48Grid.appendChild(d);
  }
  t48Score.textContent = `Score: ${t48Pts}`;
}
function t48Spawn(){
  const empty = t48Board.map((v,i)=> v?null:i).filter(v=>v!==null); if(empty.length===0) return;
  const idx = empty[Math.floor(Math.random()*empty.length)];
  t48Board[idx] = Math.random()<0.9?2:4; t48Draw();
}
function t48Slide(arr){ // slide & merge one row
  const row = arr.filter(v=>v); for(let i=0;i<row.length-1;i++){ if(row[i]===row[i+1]){ row[i]*=2; t48Pts+=row[i]; row[i+1]=0; i++; } }
  return [...row.filter(v=>v), ...Array(4-row.filter(v=>v).length).fill(0)];
}
function t48Move(dir){
  let moved=false; const g=[0,1,2,3].map(r=> t48Board.slice(r*4,r*4+4));
  if(dir==='L'){ for(let r=0;r<4;r++){ const n=t48Slide(g[r]); if(n.toString()!=g[r].toString()){ moved=true; g[r]=n; } } }
  if(dir==='R'){ for(let r=0;r<4;r++){ const rev=[...g[r]].reverse(); const n=t48Slide(rev).reverse(); if(n.toString()!=g[r].toString()){ moved=true; g[r]=n; } } }
  if(dir==='U'){ for(let c=0;c<4;c++){ const col=[g[0][c],g[1][c],g[2][c],g[3][c]]; const n=t48Slide(col); for(let r=0;r<4;r++){ if(g[r][c]!==n[r]) moved=true; g[r][c]=n[r]; } } }
  if(dir==='D'){ for(let c=0;c<4;c++){ const col=[g[0][c],g[1][c],g[2][c],g[3][c]].reverse(); const n=t48Slide(col).reverse(); for(let r=0;r<4;r++){ if(g[r][c]!==n[r]) moved=true; g[r][c]=n[r]; } } }
  if(moved){ t48Board = g.flat(); t48Spawn(); t48Draw();
    if(cheats.t2048){ // keep pushing score toward win
      const i = t48Board.indexOf(0); if(i!==-1) t48Board[i]=1024; t48Draw();
    }
  }
}
function t48InstantWin(){
  // place a 2048 tile and high score
  t48Board[0]=2048; for(let i=1;i<16;i++) t48Board[i]=0; t48Pts=99999; t48Draw();
}
window.addEventListener('keydown', e=>{
  const k=e.key.toLowerCase(); if(['arrowleft','a'].includes(k)) t48Move('L');
  if(['arrowright','d'].includes(k)) t48Move('R');
  if(['arrowup','w'].includes(k)) t48Move('U');
  if(['arrowdown','s'].includes(k)) t48Move('D');
});
// simple touch swipe
let t48Touch=null; t48Grid.addEventListener('touchstart',e=>{ t48Touch=[e.touches[0].clientX,e.touches[0].clientY]; });
t48Grid.addEventListener('touchend',e=>{ if(!t48Touch) return; const dx=e.changedTouches[0].clientX-t48Touch[0]; const dy=e.changedTouches[0].clientY-t48Touch[1];
  if(Math.abs(dx)>Math.abs(dy)){ if(dx>20) t48Move('R'); if(dx<-20) t48Move('L'); } else { if(dy>20) t48Move('D'); if(dy<-20) t48Move('U'); } t48Touch=null; });

t48Init();

// ---------- Pong ----------
const pgCanvas = document.getElementById('pong-cv');
const pgCtx = pgCanvas.getContext('2d');
const pgStart = document.getElementById('pong-start');
const pgReset = document.getElementById('pong-reset');
const pgScoreEl = document.getElementById('pong-score');
let pgApp;
function pongInit(){
  const W = pgCanvas.clientWidth; const H = Math.floor(W*0.583); pgCanvas.width=W; pgCanvas.height=H;
  const st = { px:W/2, py:H-20, pw:120, ph:10, bx:W/2, by:H/2, bvx:3, bvy:3, cx:W/2, cw:120, scoreP:0, scoreC:0, running:false };
  function reset(){ st.px=W/2; st.bx=W/2; st.by=H/2; st.bvx=3; st.bvy=3; st.scoreP=0; st.scoreC=0; }
  function draw(){
    pgCtx.clearRect(0,0,W,H);
    // center line
    pgCtx.fillStyle='#223'; pgCtx.fillRect(W/2-1,0,2,H);
    // paddles
    pgCtx.fillStyle='#60a5fa'; pgCtx.fillRect(st.px-st.pw/2, H-20, st.pw, st.ph);
    pgCtx.fillStyle='#34d399'; pgCtx.fillRect(st.cx-st.cw/2, 10, st.cw, st.ph);
    // ball
    pgCtx.fillStyle='#eab308'; pgCtx.beginPath(); pgCtx.arc(st.bx,st.by,8,0,Math.PI*2); pgCtx.fill();
  }
  function step(){
    // move ball
    st.bx += st.bvx; st.by += st.bvy;
    if(st.bx<8||st.bx>W-8) st.bvx*=-1;
    // collide with paddles
    if(st.by>H-30 && Math.abs(st.bx-st.px)<(st.pw/2+8)) st.bvy = -Math.abs(st.bvy);
    if(st.by<30 && Math.abs(st.bx-st.cx)<(st.cw/2+8)) st.bvy = Math.abs(st.bvy);
    // cpu follows ball
    st.cx += (st.bx - st.cx)*0.08;
    // scoring
    if(st.by>H+8){ st.scoreC++; if(!cheats.pong) { st.bx=W/2; st.by=H/2; } }
    if(st.by<-8){ st.scoreP++; st.bx=W/2; st.by=H/2; }
    if(cheats.pong){ st.scoreP = Math.max(st.scoreP, 11); }
    pgScoreEl.textContent = `You ${st.scoreP} : ${st.scoreC} CPU`;
    draw();
    if(pgApp?.running) requestAnimationFrame(step);
  }
  function onMove(e){ const r=pgCanvas.getBoundingClientRect(); const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left; st.px = Math.max(st.pw/2, Math.min(W-st.pw/2, x)); }
  pgCanvas.onmousemove=onMove; pgCanvas.ontouchmove=onMove;
  pgApp = { start(){ if(!pgApp.running){ pgApp.running=true; requestAnimationFrame(step);} }, reset(){ reset(); pgCtx.clearRect(0,0,W,H); pgScoreEl.textContent='You 0 : 0 CPU'; pgApp.running=false; } };
}
pgStart.addEventListener('click', ()=> pgApp?.start());
pgReset.addEventListener('click', ()=> pgApp?.reset());
pongInit();
window.addEventListener('resize', pongInit);

</script>
</body>
</html>
